(function(t){function e(e){for(var a,i,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)i=r[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(d.length)d.shift()();return n.push.apply(n,c||[]),o()}function o(){for(var t,e=0;e<n.length;e++){for(var o=n[e],a=!0,r=1;r<o.length;r++){var l=o[r];0!==s[l]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},s={app:0},n=[];function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;n.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"0e29":function(t,e,o){},"21f7":function(t,e,o){},"2cda":function(t,e,o){"use strict";o("fd06")},"56d7":function(t,e,o){"use strict";o.r(e);var a=o("2b0e"),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},n=[],i={name:"app"},r=i,l=o("2877"),c=Object(l["a"])(r,s,n,!1,null,null,null),u=c.exports,p=o("8c4f"),d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("el-container",[e("el-header",[e("Header")],1),e("el-main",[e("router-view")],1)],1)],1)},h=[],f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("h1",[t._v("路鸡棍赔钱系统")]),e("el-menu",{staticClass:"menu-body",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""},on:{select:t.handleSelect}},[e("el-menu-item",{staticClass:"ment-item",attrs:{index:"/rose"}},[t._v("涨幅中心")]),e("el-menu-item",{staticClass:"ment-item",attrs:{index:"/optional"}},[t._v("自选")])],1)],1)},b=[],g={data(){return{menu:[],activeIndex:"/test"}},methods:{handleSelect(){console.log("handleSelect")}}},m=g,y=(o("e7a5"),Object(l["a"])(m,f,b,!1,null,"43ba9450",null)),v=y.exports,w={components:{Header:v}},k=w,x=(o("2cda"),Object(l["a"])(k,d,h,!1,null,"7d8b5038",null)),O=x.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"operation"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getRoseList},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getRoseList.apply(null,arguments)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getRoseList},slot:"append"})],1)],1),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.roseList,border:""},on:{"sort-change":t.roseSort}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("v-chart",{staticClass:"echarts",attrs:{option:t.row.charts}})]}}])}),e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-popover",{attrs:{placement:"top-start",trigger:"hover"},on:{show:function(e){return t.getKline(o.row.code)}}},[e("div",{staticClass:"charts"},[e("v-chart",{attrs:{option:t.echartOption}})],1),e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(o.row.name))])])]}}])}),e("el-table-column",{attrs:{label:"现价",prop:"price"}}),e("el-table-column",{attrs:{label:"编号",prop:"code"}}),e("el-table-column",{attrs:{label:"市场",prop:"bazaar"}}),e("el-table-column",{attrs:{sortable:"custom",label:"连涨次数",prop:"num"}}),e("el-table-column",{attrs:{label:"月涨次数",sortable:"custom",prop:"monthnum"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.addOptional(o.row.code)}}},[t._v(" 添加自选 ")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.addOptional(o.row.code)}}},[t._v(" 可以想想还要什么按钮 ")])]}}])})],1),e("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.page,"page-size":t.size,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.roseSizeChange,"current-change":t.roseCurrentChange,"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e}}})],1)},S=[],_={set(t,e){window.localStorage.setItem(t,e)},get(t){const e=window.localStorage.getItem(t);return e||""},remove(t){window.localStorage.removeItem(t)}},L={data(){return{keyword:"",types:"num",order:"descending",page:0,size:10,roseList:[],total:0,codeList:[],echartOption:{}}},mounted(){this.codeList=JSON.parse(_.get("codes"))||[],this.getRoseList()},methods:{async getRoseList(){console.log("调用了getRoseList");const t={keyword:this.keyword,page:this.page,types:this.types,order:this.order,size:this.size},{data:e}=await this.$http.get("/rose/",{params:t});console.log("result: ",e),this.total=e.total,this.roseList=e.roses.map(t=>(t.charts={xAxis:{type:"category",show:!0,axisTick:{alignWithLabel:!0},data:t.dates.reverse()},yAxis:{type:"value",show:!0,scale:!0},series:[{data:t.prices.reverse(),type:"line",barWidth:"35%",itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"black",fontSize:12}}}}}]},t.bazaar=t.ts_code.split(".")[1],t))},roseSizeChange(t){this.page=1,this.size=t,this.getRoseList()},roseCurrentChange(t){this.page=t,this.getRoseList()},addOptional(t){if(-1!==this.codeList.indexOf(t))return this.$message.info("当前自选已添加");this.codeList.push(t),_.set("codes",JSON.stringify(this.codeList))},roseSort(t){console.log("event: ",t),this.types=t.prop,this.order=t.order,this.getRoseList()},async getKline(t){const e={code:t},{data:o}=await this.$http.get("/kline/",{params:e});this.echartOption={title:{show:!0,text:"K线图"},xAxis:{type:"category",show:!0,axisTick:{alignWithLabel:!0},data:o.time},yAxis:{type:"value",show:!0,scale:!0,min:Math.min.apply(null,o.price)},series:[{data:o.price,type:"line",itemStyle:{normal:{label:{show:!0,position:"top",smooth:!0,textStyle:{color:"black",fontSize:12}}}}}]},console.log("this.echartOption: ",this.echartOption)}}},z=L,I=(o("66fd"),Object(l["a"])(z,C,S,!1,null,"a270a7a4",null)),j=I.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"tag-code"},[e("div",{staticClass:"tag-title"},[t._v("自选股票列表")]),t._l(t.codeList,(function(o){return e("el-tag",{key:o,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.codeClose(o)}}},[t._v(" "+t._s(o)+" ")])})),t.codeInputVisible?e("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.codeSubmit},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.target.blur()}},model:{value:t.stockCode,callback:function(e){t.stockCode=e},expression:"stockCode"}}):e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showInput}},[t._v("+ New Tag")])],2),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.optionalList,border:""}},[e("el-table-column",{attrs:{type:"index"}}),e("el-table-column",{attrs:{label:"code",width:"100",prop:"code"}}),e("el-table-column",{attrs:{label:"股票名称"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-popover",{attrs:{placement:"top-start",trigger:"hover"},on:{show:function(e){return t.getKline(o.row.code)}}},[e("div",{staticClass:"charts"},[e("v-chart",{attrs:{option:t.echartOption}})],1),e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(o.row.name))])])]}}])}),e("el-table-column",{attrs:{label:"换手",prop:"change"}}),e("el-table-column",{attrs:{label:"涨跌幅",prop:"extent"}}),e("el-table-column",{attrs:{label:"开盘价",prop:"opening"}}),e("el-table-column",{attrs:{label:"当前价格",prop:"transaction"}}),e("el-table-column",{attrs:{label:"涨跌百分比",prop:"percentage"}})],1)],1)},T=[],R={data(){return{optionalList:[],stockCode:"",codeInputVisible:!1,codeList:[],timer:"",echartOption:{}}},mounted(){this.codeList=JSON.parse(_.get("codes"))||[],this.getOptionalList(),this.setCodeInterval(),this.getKline("000001")},methods:{async getOptionalList(){if(!this.codeList.length)return this.$message.info("当前还未添加自选股票代码,请添加代码后刷新页面");const t={optionals:this.codeList.join("_")},{data:e}=await this.$http.get("/optional/",{params:t});this.optionalList=e},codeClose(t){this.codeList.splice(this.codeList.indexOf(t),1),_.set("codes",JSON.stringify(this.codeList))},async codeSubmit(){if(console.log("調用了"),6!==this.stockCode.length)return this.$message.error("请输入6位股票代码");const{data:t}=await this.$http("/check/",{params:{code:this.stockCode}});if(!t.check)return this.$message.error("请输入正确的股票代码");this.stockCode&&this.codeList.push(this.stockCode),_.set("codes",JSON.stringify(this.codeList)),this.codeInputVisible=!1,this.stockCode="",window.location.reload()},showInput(){this.codeInputVisible=!0,this.$nextTick(t=>{this.$refs.saveTagInput.$refs.input.focus()})},setCodeInterval(){this.codeList.length&&(this.timer=setInterval(()=>{this.getOptionalList()},3e3))},async getKline(t){const e={code:t},{data:o}=await this.$http.get("/kline/",{params:e});this.echartOption={title:{show:!0,text:"K线图"},xAxis:{type:"category",show:!0,axisTick:{alignWithLabel:!0},data:o.time},yAxis:{type:"value",show:!0,scale:!0,min:Math.min.apply(null,o.price)},series:[{data:o.price,type:"line",itemStyle:{normal:{label:{show:!0,position:"top",smooth:!0,textStyle:{color:"black",fontSize:12}}}}}]},console.log("this.echartOption: ",this.echartOption)}},beforeDestroy(){console.log("beforeDestroy"),window.clearTimeout(this.timer)}},P=R,J=(o("8a60"),Object(l["a"])(P,$,T,!1,null,"670cbe7e",null)),K=J.exports;a["default"].use(p["a"]);const A=[{path:"/",component:O,redirect:"/rose",children:[{path:"/rose",component:j},{path:"/optional",component:K}]}],M=new p["a"]({routes:A});var N=M,V=o("2f62");a["default"].use(V["a"]);var W=new V["a"].Store({state:{},mutations:{},actions:{},modules:{}}),D=(o("0fb7"),o("450d"),o("f529")),E=o.n(D),H=(o("06f1"),o("6ac9")),q=o.n(H),B=(o("cbb5"),o("8bbc")),F=o.n(B),G=(o("672e"),o("101e")),Q=o.n(G),U=(o("10cb"),o("f3ad")),X=o.n(U),Y=(o("5466"),o("ecdf")),Z=o.n(Y),tt=(o("38a0"),o("ad41")),et=o.n(tt),ot=(o("8bd8"),o("4cb2")),at=o.n(ot),st=(o("4ca3"),o("443e")),nt=o.n(st),it=(o("de31"),o("c69e")),rt=o.n(it),lt=(o("a673"),o("7b31")),ct=o.n(lt),ut=(o("adec"),o("3d2d")),pt=o.n(ut),dt=(o("1951"),o("eedf")),ht=o.n(dt);a["default"].use(ht.a),a["default"].use(pt.a),a["default"].use(ct.a),a["default"].use(rt.a),a["default"].use(nt.a),a["default"].use(at.a),a["default"].use(et.a),a["default"].use(Z.a),a["default"].use(X.a),a["default"].use(Q.a),a["default"].use(F.a),a["default"].use(q.a),a["default"].prototype.$message=E.a;var ft=o("bc3a"),bt=o.n(ft),gt=(o("313e"),o("5c7f"));o("b059");a["default"].prototype.$http=bt.a,a["default"].config.productionTip=!1,a["default"].component("v-chart",gt["a"]),new a["default"]({router:N,store:W,render:t=>t(u)}).$mount("#app")},"66fd":function(t,e,o){"use strict";o("0e29")},"8a60":function(t,e,o){"use strict";o("21f7")},b059:function(t,e,o){},d9e1:function(t,e,o){},e7a5:function(t,e,o){"use strict";o("d9e1")},fd06:function(t,e,o){}});
//# sourceMappingURL=app.634678ff.js.map